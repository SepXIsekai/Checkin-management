<h1 class="text-2xl font-bold mb-4">เช็คชื่อ - <%= @course.code %></h1>

<div class="mb-6">
  <%= link_to "สร้างฟอร์มเช็คชื่อใหม่", new_course_checkin_form_path(@course), class: "bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" %>
</div>

<div class="bg-white rounded shadow">
  <% if @checkin_forms.any? %>
    <table class="w-full">
      <thead class="bg-slate-50">
        <tr>
          <th class="text-left p-3">ชื่อ</th>
          <th class="text-left p-3">สถานะ</th>
          <th class="text-left p-3">หมดเวลา</th>
          <th class="text-left p-3">เช็คชื่อแล้ว</th>
          <th class="text-left p-3"></th>
        </tr>
      </thead>
      <tbody>
        <% @checkin_forms.each do |form| %>
          <tr class="border-t">
            <td class="p-3"><%= form.title %></td>
            <td class="p-3">
              <% if form.open? %>
                <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-sm">เปิด</span>
              <% elsif form.expired? %>
                <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm">หมดเวลา</span>
              <% else %>
                <span class="bg-slate-100 text-slate-800 px-2 py-1 rounded text-sm">ปิด</span>
              <% end %>
            </td>
            <td class="p-3"><%= form.expires_at ? l(form.expires_at, format: :short) : '-' %></td>
            <td class="p-3"><%= form.attendances.count %> คน</td>
            <td class="p-3">
              <%= link_to "ดู", course_checkin_form_path(@course, form), class: "text-blue-600 hover:underline" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p class="p-6 text-slate-500">ยังไม่มีฟอร์มเช็คชื่อ</p>
  <% end %>
</div>
