<div class="flex items-center border-b border-slate-200 bg-white/80 px-8 py-4 backdrop-blur-md">
  <div class="flex flex-col items-start">
    <h1 class="text-xl font-bold">Check-in Session</h1>
    <p class="text-sm text-gray-400 font-medium"><%= @course.name %> • <%= @course.code %> • Year <%= @course.year %> • Semester <%= @course.semester %></p>
  </div>
</div>
<div class="m-10">
  <div class="flex justify-between items-baseline mb-8">
    <div>
      <div class="font-bold text-2xl text-black mb-1">
        Create New Session
      </div>
      <div class="text-sm text-slate-500">
        Set up a new session for the current class.
      </div>
    </div>
  </div>
  <div class="rounded-2xl border border-slate-200 bg-white p-6">
    <%= form_with model: [@course, @checkin_form],
      data: { controller: "checkin-form" } do |f| %>
      <% if @checkin_form.errors.any? %>
        <div class="bg-red-100 text-red-800 p-4 rounded mb-4">
          <% @checkin_form.errors.full_messages.each do |msg| %>
            <p><%= msg %></p>
          <% end %>
        </div>
      <% end %>
      <div class="mb-4">
        <%= form_input(f, :title,
        label: "Form Title",
        type: :text,
        placeholder: "e.g. check in 21-02-2026") %>
      </div>
      <div class="mb-4">
        <%= form_radio_group(
        f,
        :mode,
        label: "Mode",
        options: [
          ["Online", "online"],
          ["Onsite (Location Required)", "onsite"]
        ],
        checked: "online",
        data_action: "change->checkin-form#toggleMode"
      ) %>
      </div>
      <div class="mb-4 hidden" data-checkin-form-target="locationFields">
        <div class="bg-[#f8f8ff] p-5 rounded-xl border border-[#ececff] shadow-sm">
          <div class="grid grid-cols-2 gap-4">
            <div class="flex flex-col">
              <%= f.label :latitude,
              "Latitude",
              class: "pb-2 text-sm font-medium text-[#111118]" %>
              <%= f.text_field :latitude,
              readonly: true,
              placeholder: "13.7563",
              data: { checkin_form_target: "latitude" },
              class: "h-12 px-4 rounded-xl border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#261ce6]" %>
            </div>
            <div class="flex flex-col">
              <%= f.label :longitude,
              "Longitude",
              class: "pb-2 text-sm font-medium text-[#111118]" %>
              <%= f.text_field :longitude,
              readonly: true,
              placeholder: "100.5018",
              data: { checkin_form_target: "longitude" },
              class: "h-12 px-4 rounded-xl border border-slate-200 bg-white focus:outline-none focus:ring-2 focus:ring-[#261ce6]" %>
            </div>
          </div>
          <div class="mt-4">
            <%= form_input(f, :radius,
            label: "Radius (meters)",
            type: :number,
            placeholder: "100") %>
          </div>
          <button
          type="button"
          data-action="click->checkin-form#getCurrentLocation"
            class="mt-3 w-full h-12 rounded-xl
            bg-[#261ce6] text-white font-medium
            shadow-sm transition-all duration-200
            hover:bg-[#1f17c4] hover:shadow-md
            active:scale-[0.98] cursor-pointer">
            Use Current Location
          </button>
        </div>
      </div>
      <div class="flex gap-3 mt-6">
        <%= f.submit "Create",
        class: "h-12 px-6 rounded-xl
               bg-[#261ce6] text-white font-medium
               shadow-sm transition-all duration-200
               hover:bg-[#1f17c4] hover:shadow-md
               active:scale-[0.98]
               cursor-pointer" %>
        <%= link_to "Cancel",
        course_checkin_forms_path(@course),
        class: "h-12 px-6 rounded-xl
               bg-white text-[#111118] font-medium
               border border-[#dcdce5]
               shadow-sm transition-all duration-200
               hover:bg-[#f5f5fa] hover:shadow-md
               active:scale-[0.98]
               flex items-center justify-center" %>
      </div>
    <% end %>
  </div>
</div>
